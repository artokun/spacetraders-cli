<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>SpiceTraders MMO</title>
  </head>
  <body>
    Logging in with Google Auth

    <script src="https://www.gstatic.com/firebasejs/4.1.2/firebase.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.2/axios.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyDUmaatur6k4rhElvpiqXYOUhRVJME-V8U",
        authDomain: "spice-traders-core.firebaseapp.com",
        databaseURL: "https://spice-traders-core.firebaseio.com",
        projectId: "spice-traders-core",
        storageBucket: "spice-traders-core.appspot.com",
        messagingSenderId: "567711902185"
      };
      firebase.initializeApp(config);

      firebase.auth().getRedirectResult().then(function(result) {
        if (result.credential) {
          return axios.post('/auth/google/callback', { data: result.credential }).then(function() {
            console.log('success')
          })
        }
        firebase.auth().signInWithRedirect(new firebase.auth.GoogleAuthProvider());
      }).catch(function(error) {
        console.error(error)
      });

    </script>
  </body>

</html>
